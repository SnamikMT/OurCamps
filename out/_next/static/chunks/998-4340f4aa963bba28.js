"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{6284:(e,t,a)=>{a.d(t,{V:()=>l,h:()=>s});let n={token:"8114065899:AAHhz1BRJTPQBCbEoxWsMOsMaTjVbVIOnlI",chatId:"-4574867076"},s=(e,t)=>{let a="<b>\uD83D\uDD14 Новая заявка с сайта (".concat("modal"===t?"Форма обратного звонка":"Контактная форма",")</b>\n\n");return a+="<b>Имя:</b> ".concat(e.name,"\n"),a+="<b>Email:</b> ".concat(e.email,"\n"),a+="<b>Телефон:</b> ".concat(e.phone,"\n"),"contact"===t&&"message"in e&&(a+="<b>Сообщение:</b> ".concat(e.message,"\n")),a},l=async e=>{try{let t=await fetch("https://api.telegram.org/bot".concat(n.token,"/sendMessage"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:n.chatId,text:e,parse_mode:"HTML"})});return(await t.json()).ok}catch(e){return console.error("Ошибка отправки в Telegram:",e),!1}}},6998:(e,t,a)=>{a.d(t,{ModalProvider:()=>m,h:()=>c});var n=a(5155),s=a(2115),l=a(6874),r=a.n(l),o=a(6284);let i=e=>{let{isOpen:t,onClose:a}=e,[l,i]=(0,s.useState)({name:"",email:"",phone:""}),[d,m]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!0),[p,b]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[y,v]=(0,s.useState)(!1),w=(0,s.useRef)(null),j=(0,s.useRef)(null),N=e=>{let{name:t,value:a}=e.target;i(e=>({...e,[t]:a}))},k=e=>{let t=e.replace(/\D/g,"");t.length>0&&"7"!==t[0]&&"8"!==t[0]?t="7"+t:0===t.length&&(t="7"),"8"===t[0]&&(t="7"+t.substring(1)),t.length>11&&(t=t.substring(0,11));let a="";return t.length>0&&(a+="+"+t[0]),t.length>1&&(a+=" ("),t.length>1&&(a+=t.substring(1,Math.min(4,t.length))),t.length>4&&(a+=") "),t.length>4&&(a+=t.substring(4,Math.min(7,t.length))),t.length>7&&(a+="-"),t.length>7&&(a+=t.substring(7,Math.min(9,t.length))),t.length>9&&(a+="-"),t.length>9&&(a+=t.substring(9,11)),a},_=async e=>{if(e.preventDefault(),!/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(l.phone)){g("Пожалуйста, введите номер телефона полностью");return}m(!0);let t=(0,o.h)(l,"modal"),a=await (0,o.V)(t);m(!1),a?(x(!1),setTimeout(()=>{u(!0),b(!0)},300),i({name:"",email:"",phone:""})):alert("Произошла ошибка при отправке. Пожалуйста, попробуйте позже.")},E=()=>{v(!1),setTimeout(()=>{a()},300)},C=e=>{w.current&&!w.current.contains(e.target)&&E()},S=e=>{"Escape"===e.key&&E()},I=()=>{let e=window.innerWidth-document.documentElement.clientWidth,t=parseInt(window.getComputedStyle(document.body).paddingRight,10)||0;document.body.style.paddingRight="".concat(e+t,"px"),document.body.style.overflow="hidden"},T=()=>{document.body.style.paddingRight="",document.body.style.overflow=""},D=()=>{i({name:"",email:"",phone:""}),u(!1),x(!0),b(!1),g(null)};return((0,s.useEffect)(()=>{if(t){let e=setTimeout(()=>{let e=j.current;if(e&&e.value&&e.value!==l.phone){let t=k(e.value);e.value=t,i(e=>({...e,phone:t}))}},200);return()=>clearTimeout(e)}},[t,l.phone]),(0,s.useEffect)(()=>{t&&v(!0)},[t]),(0,s.useEffect)(()=>(t?(I(),document.addEventListener("mousedown",C),document.addEventListener("keydown",S)):(T(),document.removeEventListener("mousedown",C),document.removeEventListener("keydown",S),setTimeout(D,300)),()=>{T(),document.removeEventListener("mousedown",C),document.removeEventListener("keydown",S)}),[t]),t||y)?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-primary-black/60 \n        ".concat(y?"opacity-100":"opacity-0 pointer-events-none"," \n        transition-opacity duration-300 px-3 md:px-4 overflow-y-auto"),children:(0,n.jsx)("div",{ref:w,className:"bg-white w-full max-w-md rounded-2xl shadow-xl \n          transform ".concat(y?"translate-y-0 scale-100":"translate-y-8 scale-95"," \n          transition-all duration-300 overflow-hidden\n          ").concat(y?"animate-[fadeIn_0.5s_forwards]":"animate-[fadeOut_0.3s_forwards]"," my-4 sm:my-5"),children:(0,n.jsxs)("div",{id:"modalContainer",children:[(0,n.jsxs)("div",{id:"modalForm",className:"transition-all duration-300 \n              ".concat(h?"opacity-100":"opacity-0 transform -translate-y-4 pointer-events-none"," \n              ").concat(c?"hidden":""),children:[(0,n.jsxs)("div",{className:"relative px-5 sm:px-6 pt-5 sm:pt-6 pb-2 sm:pb-3",children:[(0,n.jsx)("button",{onClick:E,className:"absolute right-5 top-5 text-gray-400 hover:text-primary-black transition-colors",children:(0,n.jsx)("i",{className:"fa-solid fa-xmark text-xl"})}),(0,n.jsxs)("div",{className:"text-center mb-4 sm:mb-5",children:[(0,n.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 gradient-bg rounded-xl flex items-center justify-center text-white mx-auto mb-4",children:(0,n.jsx)("i",{className:"fa-solid fa-rocket text-xl sm:text-2xl"})}),(0,n.jsx)("h3",{className:"font-bounded text-xl font-bold mb-2",children:"Обратный звонок"}),(0,n.jsx)("p",{className:"text-gray-500 text-sm sm:text-base max-w-sm mx-auto",children:"Заполните форму, и мы свяжемся с вами в ближайшее время"})]})]}),(0,n.jsx)("div",{className:"px-5 sm:px-6 pb-5 sm:pb-6",children:(0,n.jsxs)("form",{className:"space-y-4",onSubmit:_,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"modal-name",className:"block mb-1.5 font-medium text-gray-700",children:"Имя"}),(0,n.jsx)("input",{type:"text",id:"modal-name",name:"name",value:l.name,onChange:N,required:!0,className:"w-full px-4 py-2.5 bg-primary-gray border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-blue transition-all placeholder-gray-400 hover:shadow-sm",placeholder:"Иван Иванов"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"modal-email",className:"block mb-1.5 font-medium text-gray-700",children:"Email"}),(0,n.jsx)("input",{type:"email",id:"modal-email",name:"email",value:l.email,onChange:N,required:!0,className:"w-full px-4 py-2.5 bg-primary-gray border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-blue transition-all placeholder-gray-400 hover:shadow-sm",placeholder:"example@mail.ru"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"modal-phone",className:"block mb-1.5 font-medium text-gray-700",children:"Телефон"}),(0,n.jsx)("input",{type:"tel",id:"modal-phone",name:"phone",value:l.phone,onInput:e=>{g(null);let t=e.target;t.value=k(t.value),i(e=>({...e,phone:t.value}))},onChange:e=>{g(null);let t=e.target;t.value&&t.value!==l.phone&&(t.value=k(t.value),i(e=>({...e,phone:t.value})))},onFocus:e=>{""===e.target.value&&(e.target.value="+7 (",i(t=>({...t,phone:e.target.value})))},onBlur:e=>{("+7 ("===e.target.value||"+7"===e.target.value)&&(e.target.value="",i(e=>({...e,phone:""})))},onKeyDown:e=>{let t=e.target.selectionStart||0;if("Backspace"===e.key&&t<=3||"Delete"===e.key&&t<2){e.preventDefault();return}/\d/.test(e.key)||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||e.preventDefault()},ref:j,required:!0,className:"w-full px-4 py-2.5 bg-primary-gray border-0 rounded-xl \n                      focus:outline-none focus:ring-2 \n                      ".concat(f?"focus:ring-primary-red ring-2 ring-primary-red":"focus:ring-primary-blue"," \n                      transition-all placeholder-gray-400 hover:shadow-sm"),placeholder:"+7 (___) ___-__-__",autoComplete:"tel"}),f&&(0,n.jsxs)("div",{className:"mt-1.5 text-primary-red text-sm flex items-center",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation mr-1"}),(0,n.jsx)("span",{children:f})]})]}),(0,n.jsx)("div",{className:"pt-2 sm:pt-3",children:(0,n.jsx)("button",{type:"submit",disabled:d,className:"gradient-bg text-white font-semibold py-2.5 px-6 rounded-xl hover:shadow-button transform hover:-translate-y-1 transition-all w-full btn-animated text-base disabled:opacity-70 disabled:cursor-not-allowed",children:d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-notch fa-spin mr-2"}),"Отправка..."]}):"Отправить заявку"})}),(0,n.jsxs)("div",{className:"text-sm text-gray-500 text-center mt-3",children:["Нажимая на кнопку, вы подтверждаете, что ознакомлены и согласны с ",(0,n.jsx)(r(),{href:"/privacy",className:"text-primary-blue hover:underline",children:"политикой конфиденциальности"})]})]})})]}),(0,n.jsxs)("div",{id:"modalSuccess",className:"p-5 sm:p-6 text-center transition-all duration-500 \n              ".concat(p?"opacity-100 transform scale-100":"opacity-0 transform scale-95"," \n              ").concat(c?"":"hidden"),children:[(0,n.jsxs)("div",{className:"relative mx-auto mb-5",children:[(0,n.jsx)("div",{className:"w-18 h-18 gradient-bg rounded-full flex items-center justify-center text-white mx-auto animate-[fadeIn_0.6s_forwards]",children:(0,n.jsx)("i",{className:"fa-solid fa-check text-2xl sm:text-3xl"})}),(0,n.jsx)("div",{className:"absolute -bottom-1 -left-1 w-22 h-22 rounded-full bg-primary-blue/5 -z-10 blur-xl"})]}),(0,n.jsx)("h3",{className:"font-bounded text-xl font-bold mb-2.5 animate-[fadeIn_0.7s_forwards]",children:"Заявка отправлена!"}),(0,n.jsx)("p",{className:"text-gray-500 text-base mb-4 animate-[fadeIn_0.8s_forwards]",children:"Мы получили вашу заявку и свяжемся с вами в ближайшее время."}),(0,n.jsxs)("div",{className:"flex justify-center items-center gap-2 text-xs sm:text-sm text-gray-400 mb-4 animate-[fadeIn_0.9s_forwards]",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary-blue/20"}),(0,n.jsx)("span",{children:"Специалист свяжется с вами в течение 24 часов"}),(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary-blue/20"})]}),(0,n.jsx)("button",{type:"button",onClick:E,className:"gradient-bg text-white font-medium py-2.5 px-6 rounded-xl hover:shadow-button transform hover:-translate-y-1 transition-all text-center w-full btn-animated mt-3 text-base animate-[fadeIn_1s_forwards]",children:"Отлично"})]})]})})}):null},d=(0,s.createContext)(void 0),m=e=>{let{children:t}=e,[a,l]=(0,s.useState)(!1),r=()=>l(!1);return(0,n.jsxs)(d.Provider,{value:{openModal:()=>l(!0),closeModal:r,isModalOpen:a},children:[t,(0,n.jsx)(i,{isOpen:a,onClose:r})]})},c=()=>{let e=(0,s.useContext)(d);if(void 0===e)throw Error("useModal must be used within a ModalProvider");return e}}}]);